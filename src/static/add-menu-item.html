<!DOCTYPE html>
<html lang="en">
<head>
    <!-- meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Edit/Add Menu Item</title>
    <link rel="stylesheet" href="my-account.css">
<!--     <link rel="stylesheet" href="edit-menu.css"> -->
    <link rel="stylesheet" href="/css/styles.css">

    <!--jQuery-->
    <script
        src="http://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous"></script>
    <!-- link header.html and footer.html -->
    <script>
        $(function() {
            $('#header').load('header.html');
            $('#footer').load('footer-general.html');
        });
    </script>
</head>
<body>
    <!-- call header and footer -->
    <div id="header"></div>

    <!-- Hero module -->
    <div class=banner>
        <div class="banner-img">
            <img class="bimg" src="/design/images/my-account-banner.png">
            </img>
        </div>
    </div>

    <!-- edit form -->
    <div class="container">
    
    <div class="form-heading">
            <h2>Add a New Menu Item</h2>
            <p>Fill out the form below to add a new menu item to the pizza menu for customers to order.</p>
    </div>

    <form id="form-add-menu-item row">
        <div class="form-row">
            <label for="itemName" class="label">Pizza Name:</label>
            <input type="text" id="itemName" name="itemName" class="form-control">
        </div>
        <div class="form-row">
            <label for="itemCrust" class="label">Crust Type:</label>
            <select id="itemCrust" name="itemCrust" class="form-control">
                <option>Thin-Crust</option>
                <option>Thick-Crust</option>
                <option>Whole-Wheat</option>
                <option>Caulfiflower</option>
            </select>
        </div>
        <div class="form-row">
            <label>Sauce(s):</label>
                <div class="input-group">
                 <div class="form-check form-check-inline">
                  <input class="form-check-input" type="checkbox" id="sauce-red-sauce" value="red-sauce">
                  <label class="form-check-label" for="sauce-red-sauce">Red sauce</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="checkbox" id="sauce-garlic-sauce" value="garlic-sauce">
                  <label class="form-check-label" for="sauce-garlic-sauce">Garlic sauce</label>
                    </div>
                </div>
        </div>
        <div class="form-row">
            <label>Cheese(s):</label>
                <div class="input-group">
                 <div class="form-check form-check-inline">
                  <input class="form-check-input" type="checkbox" id="cheese-mozzarella" value="mozzarella">
                  <label class="form-check-label" for="cheese-mozzarella">Mozzarella</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="checkbox" id="cheese-three-cheese" value="three-cheese">
                  <label class="form-check-label" for="cheese-three-cheese">Three-cheese blend</label>
                    </div>
                </div>
        </div>
        <div class="form-row">
            <label>Topping(s):</label>
            <div class="input-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="topping-green-peppers">
                <label class="form-check-label" for="topping-green-peppers">
                  Green Peppers
                </label>
            </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="topping-mushrooms">
            <label class="form-check-label" for="topping-mushrooms">
              Mushrooms
            </label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="topping-pepperoni">
            <label class="form-check-label" for="topping-pepperoni">
              Pepperoni
            </label>
          </div>
        </div>
        </div>
        <div class="form-row">
                <label for="smallPrice" class="label">Small Size Price:</label>
                <input type="number" id="smallPrice" name="smallPrice" class="form-control" placeholder="0.00">
            </div>
        <div class="form-row">
                <label for="mediumPrice" class="label">Medium Size Price:</label>
                <input type="number" id="mediumPrice" name="mediumPrice" class="form-control" placeholder="0.00">
        </div>
        <div class="form-row">
                <label for="largePrice" class="label">Large Size Price:</label>
                <input type="number" id="largePrice" name="largePrice" class="form-control" placeholder="0.00">
        </div>
        <div class="form-row">
                <label for="extraLargePrice" class="label">Extra Large Size Price:</label>
                <input type="number" id="extraLargePrice" name="extraLargePrice" class="form-control" placeholder="0.00">
        </div>
        <div class="form-row">
                <label for="itemDesc" class="label">Description:</label>
                <textarea id="itemDesc" name="itemDesc" class="form-control" rows="5"></textarea>
        </div>
        <div class="form-row" id="submit-button-ref">
            <button class="btn btn-primary" type="button" onclick="processFormContents()">
            Save Item
            </button>
        </div>
        <div class="submit-confirmation"></div>

    </form>

    </div>

    <div id="footer"></div>

    <body onload="getToppingsFromDB('2')">

    <script type="text/javascript">
        function processFormContents(){
            var name = document.getElementById('itemName');
            var crust = document.getElementById('itemCrust');
            var sauce = document.getElementById('itemSauce');
            var cheese = document.getElementById('itemCheese');
            var toppings = document.getElementById('itemToppings');
            var smallPrice = document.getElementById('smallPrice');
            var mediumPrice = document.getElementById('mediumPrice');
            var largePrice = document.getElementById('largePrice');
            var extraLargePrice = document.getElementById('extraLargePrice');
            var description = document.getElementById('itemDesc');

            var nameInfo = name.value;
            var crustInfo = crust.value;
            var sauceInfo = sauce.value;
            var cheeseInfo = cheese.value;
            var toppingsInfo = toppings.value;
            var smallPriceInfo = smallPrice.value;
            var mediumPriceInfo = mediumPrice.value;
            var largePriceInfo = largePrice.value;
            var extraLargePriceInfo = extraLargePrice.value;
            var descriptionInfo = description.value;

            const newMenuItem = {
                item_id: 0,
                pizza_name: nameInfo,
                crust: crustInfo,
                sauce: sauceInfo,
                cheese: cheeseInfo,
                toppings: toppingsInfo,
                sm_price: smallPriceInfo,
                med_price: mediumPriceInfo,
                lg_price: largePriceInfo,
                xlg_price: extraLargePriceInfo,
                description: descriptionInfo
            };

            // save new item
            addMenuItemtoDB(newMenuItem);

            // Clear form after submitted
            name.value = "";
            crust.value = "";
            sauce.value = "";
            cheese.value = "";
            toppings.value = "";
            smallPrice.value = "";
            mediumPrice.value = "";
            largePrice.value = "";
            extraLargePrice.value = "";
            description.value = "";

            // create confirmation message
            if(!document.getElementById('confirmation-message')){
                var formDiv = document.getElementById('form-add-menu-item');
                formDiv.id = "confirmation-message";
                const message = document.createElement('h4');
                message.classList.add('submit-confirmation');
                message.appendChild(document.createTextNode("Item added successfully!"));
                let backLink = document.createElement('a');
                backLink.classList.add('submit-confirmation');
                let backLinkText = document.createTextNode("Back to Menu >>");
                backLink.title = "Go back to menu";
                backLink.href = "admin-menu.html";
                backLink.appendChild(backLinkText);
                formDiv.appendChild(message);
                formDiv.appendChild(backLink);
            }

        }
    </script>
</body>
</html>